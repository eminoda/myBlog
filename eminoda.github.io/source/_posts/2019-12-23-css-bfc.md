---
title: css 中 BFC 规范
tags: css
categories:
  - 开发
  - 前端开发
thumb_img: css.png
date: 2019-12-23 16:28:12
---


# BFC

**BFC** 又称 Block Formatting Context （块状格式化上下文）

MDN 解释：是块盒子的布局过程发生的区域，也是浮动元素与其他元素交互的区域。

# 哪些方式会创建 BFC ？

- 根元素是 html
- 设置 float 的元素
- position 设置 absolute 、 fixed 的元素
- display: inline-block
- display: table-cell （table 单元格默认为此样式）
- display: table-caption
- display: table, table-row, table-row-group, table-header-group, table-footer-group
- block 块行元素设置 overflow
- display: flow-root
- 设置 contain: layout, content, paint 的元素
- flex item
- grid item
- column-count or column-width 不为 auto 的元素（包括 column-count: 1）
- column-span: all

# 实际应用举例

## margin 塌陷

首先我们知道当在相邻的块级元素的 margin 会发生合并现象（称为：外边距折叠）

```html
<div class="blue"></div>
<div class="red-inner" style="background: red;">red inner（含高，margin）</div>
```

{% asset_image margin-lost.png %}

为目标元素外新建一个父元素，并设置 overflow 属性，设置在其内部溢出可见：

```html
<style>
  .red-outer {
    overflow: hidden;
    background: red;
  }
</style>
<div class="blue"></div>
<div class="red-outer">
  <div class="red-inner">red inner（含高，margin）</div>
</div>
```

{% asset_image margin-lost-bfc.png %}

能看到 margin 的上下边距被控制在新的父元素中了。

## 包裹浮动

我们知道设置浮动 float 属性的元素将脱离文档流：

```html
<style>
  .box {
    background-color: rgb(224, 206, 247);
    border: 5px solid rebeccapurple;
    overflow: auto; /* bfc */
    /* 也可以设置 display: flow-root; */
  }

  .float {
    float: left;
    width: 200px;
    height: 150px;
    background-color: white;
    border: 1px solid black;
    padding: 10px;
  }
</style>
<div class="box">
  <div class="float">I am a floated box!</div>
  <p>I am content inside the container.</p>
</div>
```

{% asset_image float-escape.png %}

类似处理 margin 边距合并问题，我们也可以设置 overflow 来解决。也可以设置 display: flow-root;

{% asset_image float-escape-bfc.png %}

# 总结

文本章参考 MDN ，并简单讲了下 css 中 BFC 的概念。

几个例子示范了如何处理元素间的 **隔离问题** 。
