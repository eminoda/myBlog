<!doctype html><html><head><meta charset=UTF-8><title>elk 分享 - By shixinghao</title><link rel=stylesheet href=//cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=//cdn.staticfile.org/prism/1.15.0/themes/prism.min.css><link rel=stylesheet href=//cdn.staticfile.org/KaTeX/0.10.0-rc.1/katex.min.css><link href=./css/chunk-vendors.92b5a431.css rel=stylesheet></head><body><div><article id=webslides><section slide class="slide bg-black-blue aligncenter" image="./images/elk/index.png .dark"><span class="background dark" style="background-image:url('./images/elk/index.png')"></span><div class=wrap wrap=true><h1 class="text-landing text-shadow">ELK 分享</h1><p class=text-intro>By shixinghao</p><p><a href=https://github.com/ksky521/nodeppt class="button ghost" target=_blank><i class="fa fa-github"></i> Github nodeppt</a></p><hr></div></section><section slide class="slide bg-black-blue aligncenter"><div class=wrap wrap=true><h2>什么是 ELK</h2><p><img src=./img/product.f1369cb0.png alt=产品></p><p class=text-intro>ELK 其实并不是一款软件，而是一整套解决方案，是三个软件产品的首字母缩写，Elasticsearch，Logstash 和 Kibana.</p><p>这样种集合称为 Elastic Stack</p><hr></div></section><section slide class="slide bg-black-blue aligncenter"><div class=wrap wrap=true><h2>Filebeat(Beats)</h2><p>轻量型 (lightweight) 日志采集器</p><p class=text-intro>部署在生产服务器，<strong>收集</strong> 日志文件 <strong>自动择机</strong> 发送给 Logstash、elasticsearch</p><p>当您要面对成百上千、甚至成千上万的服务器、虚拟机和容器生成的日志时，请告别 SSH 吧。</p><hr></div></section><section slide class="slide bg-black-blue aligncenter"><div class=wrap wrap=true><filebeat -harvester=""><img src=./img/filebeat-harvester.55481128.png class=size-50></filebeat><hr></div></section><section slide class="slide bg-black-blue aligncenter"><div class=wrap wrap=true><filebeat -module=""><img src=./img/filebeat-module.3d6bc3ed.png class=size-30></filebeat><hr></div></section><section slide class="slide bg-black-blue aligncenter"><div class=wrap wrap=true><p>ingest gork(nginx)</p><pre class="animated fadeInUp language-textile language-textile"><code class="animated fadeInUp language-textile"><span class="token phrase">66.249.79.242 <span class="token inline"><span class="token punctuation">-</span><span class="token deleted"> </span><span class="token punctuation">-</span></span> [18/Apr/2019:18:21:22 <span class="token inline"><span class="token punctuation">+</span><span class="token inserted">0800] GET / HTTP/1.1 200 24299 0.501 - Mozilla/5.0 (compatible; Googlebot/2.1; </span><span class="token punctuation">+</span></span>http://www.google.com/bot.html) Googlebot
</span></code></pre><pre class=language-json><code class=language-json><span class="token property">"grok"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"message"</span><span class="token punctuation">,</span>
    <span class="token property">"patterns"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"\"?%{IP_LIST:nginx.access.remote_ip_list} %{IP_LIST:nginx.access.forward_ip_list} - \\[%{HTTPDATE:nginx.access.time}\\] %{GREEDYDATA:nginx.access.info} %{NUMBER:nginx.access.response_code:long} %{NUMBER:nginx.access.body_sent.bytes:long} %{NUMBER:nginx.access.request_time:float} (%{NUMBER:nginx.access.uid}|-) %{GREEDYDATA:nginx.access.agent} %{SPIDER:nginx.access.spider}"</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"pattern_definitions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"IP_LIST"</span><span class="token operator">:</span> <span class="token string">"%{IP}(\"?,?\\s*%{IP})*|-"</span><span class="token punctuation">,</span>
        <span class="token property">"SPIDER"</span><span class="token operator">:</span> <span class="token string">"%{WORD}|-"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"ignore_missing"</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><hr></div></section><section slide class="slide bg-black-blue aligncenter"><div class=wrap wrap=true><h2>Logstash（可选）</h2><p>集中、转换和存储数据</p><logstash><img src=./img/logstash.1f77f22f.png class=size-30></logstash><hr></div></section><section slide class="slide bg-black-blue aligncenter"><div class=wrap wrap=true><logstash -code=""><img src=./img/logstash-code.b12699ff.png class=size-100></logstash><p>logstash.conf</p><hr></div></section><section slide class="slide bg-black-blue aligncenter"><div class=wrap wrap=true><h2>Kibana</h2><p>视图界面</p><p class=text-intro>通过 Kibana，您能够对 Elasticsearch 中的数据进行 <strong>可视化</strong> 并在 Elastic Stack 进行操作</p><hr></div></section><section slide class="slide bg-black-blue aligncenter"><div class=wrap wrap=true><kibana -dashboard=""><img src=./img/kibana-dashboard.559d04ff.png class=size-100></kibana><hr></div></section><section slide class="slide bg-black-blue alignleft"><div class=wrap wrap=true><h2>Elasticsearch</h2><p>数据分析搜索</p><p class=text-intro>Elasticsearch 是高度可伸缩的开源全文搜索和分析引擎。 你可以即时存储、搜索并分析大容量数据。可靠的底层引擎和技术通常应对复杂的搜索场景和需求。</p><hr></div></section><section slide class="slide bg-black-blue aligncenter"><div class=wrap wrap=true><h2>看下实际效果</h2></div></section><section slide class="slide bg-black-blue aligncenter"><div class=wrap wrap=true><h2>over</h2></div></section></article></div><script src=//cdn.staticfile.org/echarts/4.1.0-release/echarts.min.js></script><script>window.pluginsOptions = {}



document.addEventListener('DOMContentLoaded', () => {
    const ws = new WebSlides({
        loop: false
    })
    window.wsInstance = ws;
}, false)</script><script src=./js/chunk-vendors.bbd43bf0.js></script><script src=./js/elk.fbf47bf4.js></script></body></html>