---
title: git 分支合并策略
tags: git
categories:
  - 开发
  - 前端开发
thumb_img: git.png
---

git 依靠分布式版本控制、以及出众的分支功能受到互联网开发们的青睐，如果你上过 github 就离不开 git 的相关操作。

我司原来用的是 svn ，经过两年的时间，全项目都已换成 git ，我现在个人项目也全部用 github 和 gitee 。

但是，随着需求迭代周期的不断变化、发布的严格管控、线上问题的紧急修复等，开发分支时刻面临着来自不同需求方的“挑战”，合并到生产分支有时总会出现不可控的问题。

这些问题对开发人员管控代码造成了“不小的困扰”。归根到底就是没有对 git branch 的开发合并策略有个系统的认识。

借如下这张图，聊下 git 分支合并策略：

{% asset_img git-branch-strategy.jpg git 分支合并策略 %}

相信有和我们一样的 git 分支合并问题的同学看过这图后，已经有了解决方案，可以忽略之后的内容了。当然看晕的同学，可以继续阅读下去，我会尽可能说清楚其中的方式。

## 面临的问题

首先对目前我司分支的命名做个简单介绍：

- 开发分支： develop
- 发布分支： product

具体问题举例：

- 在开发资源有限的前提下，面对多个需求，如何管理 develop 分支？

  比如 A ， B 两个需求，A 预估 5 天，B 预估 10 天，但整个开发时间只有 10 天，势必 AB 两个需要就要同时进行。但更不幸的是，第 5 天时就要把 A 推到生产，一条 develop 分支完全不能应对，那怎么管理 develop 分支？

- 线上紧急 bug 的修复

  如果 develop 分支和线上的 product 分支进度一致，遇到 bug 修复，可以直接修改 develop 然后 merge 到 product 上。但如果 develop 不停就其他功能提交，那用什么分支来做 product 的 bug 修复？（原则上，我们 product 相当于 master 分支，不会在其之上做代码的修改）

- 线上发布后，因为某些原因需，如何快速回滚上个版本
- 怎么维护“相对”稳定的分支，作为开发分支
